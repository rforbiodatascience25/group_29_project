---
title: "Cleaning data"
format: html
editor: visual
editor_options: 
  chunk_output_type: console
---

# Loading packages

```{r}

library("tidyverse")

source(file = "R/99_proj_func.R")
```

# Loading data files

```{r}

blood <- read_csv(file = "data/blood_load.csv")

tonsil <- read_csv(file = "data/tonsil_load.csv")

thymus <- read_csv(file = "data/thymus_load.csv")
```

# Cleaning blood data

```{r}

selected_measures <- c("CVQb", "MedQb", "count", "PEpos")

blood_clean <- blood |> 
  pivot_selected_variables(ID_col = "CD",
                           variables = selected_measures,
                           tissue = "blood")

tonsil_clean <- tonsil |> 
  pivot_selected_variables(ID_col = "CD",
                           variables = selected_measures,
                           tissue = "tonsil")

thymus_clean <- thymus |> 
  pivot_selected_variables(ID_col = "CD",
                           variables = selected_measures,
                           tissue = "thymus")

# I have saved this for later use. Just let it be here.
#   mutate(hierarchy_level = case_when(cell_type == "Lymphs" ~ 1,
                                     #cell_type %in% c("T", "B") ~ 2,
                                     #cell_type %in% c("Tgd", "TCD8", "TCD4") ~ 3,
                                     #.default = 4),
         #.after = cell_type)
```

# Cleaning tonsil data

# Cleaning thymus data

# Writing data files
